---
import { getEntry } from 'astro:content';
import "../assets/app.css";
import Head from './head.astro';
import Navbar from '../components/Navbar.astro';
import Navigation from '../components/Navigation.astro'
import { generateTOC } from '../utils/generateTOC';

// Extract current category from URL path
const currentPath = Astro.url.pathname;
const sanitizedPath = currentPath.substring(1).replace(/\/$/, ""); // Remove trailing slash
const post = await getEntry('wiki', sanitizedPath);
const layout = post.data.template;
---

<html
  lang="fr"
>
  <Head title={post.data.title} description={post.data.description} />
  <body class="bg-base-100 max-h-screen h-screen">
    <Navbar />
    <main class="flex-grow">
      <Navigation>
        <div class="flex">
          <article class="prose max-w-full w-full mx-2 lg:mx-10 my-4 lg:my-8">
            <slot />
          </article>
          <div class="w-64 bg-base-200 min-h-full w-68 p-4">
            <p>Imaginez ici une table des contenu (TOC)</p>
          </div>
        </div>
      </Navigation>
    </main>
  </body>
</html>